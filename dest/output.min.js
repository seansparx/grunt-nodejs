function site_url(){return document.getElementById("site_url").value+"admin/"}function base_url(){return document.getElementById("base_url").value}function success_msg(a){$(".alert-success").html('<button data-dismiss="alert" class="close" type="button">×</button><strong>Success!</strong> '+a),$(".alert-success").show(),setTimeout(function(){$(".alert-success").fadeOut()},5e3)}function error_msg(a){$(".alert-error").html('<button data-dismiss="alert" class="close" type="button">×</button><strong>Warning!</strong>&nbsp;&nbsp;'+a),$(".alert-error").show(),setTimeout(function(){$(".alert-error").fadeOut()},5e3)}function same_value(){document.getElementById("menu_title").value=document.getElementById("page_title").value}function unblock_record(a,b){bootbox.confirm("Are you sure want to unblock this ?",function(c){return 1!=c?!1:void do_unblock(a,b)})}function do_unblock(a,b){var c;switch($.trim(b)){case"block_people":c=site_url()+"people/unblock_people"}$.getJSON(c,{id:a},function(a){if(a.record)refresh_datatable(b,a.record);else{var c=$(".dynamicTable").DataTable();c.fnClearTable()}a.success?success_msg(a.message):error_msg(a.message)})}function block_record(a,b){bootbox.confirm("Are you sure want to block this ?",function(c){return 1!=c?!1:void do_block(a,b)})}function do_block(a,b){var c;switch($.trim(b)){case"people":c=site_url()+"people/block_people"}$.getJSON(c,{id:a},function(a){if(a.record)refresh_datatable(b,a.record);else{var c=$(".dynamicTable").DataTable();c.fnClearTable()}a.success?success_msg(a.message):error_msg(a.message)})}function delete_record(a,b){bootbox.confirm("Are you sure want to delete?",function(c){return 1!=c?!1:void do_delete(a,b)})}function do_delete(a,b){var c;switch($.trim(b)){case"user":c=site_url()+"users/delete";break;case"page":c=site_url()+"page/delete";break;case"email_template":c=site_url()+"email_temp/delete";break;case"people":c=site_url()+"people/delete";break;case"organisation":c=site_url()+"organisation/delete";break;case"post":c=site_url()+"posts/delete";break;case"location":c=site_url()+"location/delete";break;case"comments":c=site_url()+"comments/delete";break;case"plan":c=site_url()+"plan/delete";break;case"faq":c=site_url()+"faq/delete";break;case"challenge":c=site_url()+"organisation/challenge_delete";break;case"order":c=site_url()+"order/delete_order";break;case"people_order":c=site_url()+"order/delete_people_order"}$.getJSON(c,{id:a},function(a){if(console.log(a),a.record)refresh_datatable(b,a.record);else{var c=$(".dynamicTable").DataTable();c.fnClearTable()}a.success?success_msg(a.message):error_msg(a.message)})}function refresh_datatable(a,b){switch($.trim(a)){case"user":users_table(b);break;case"page":page_table(b);break;case"email_template":email_template_table(b);break;case"organisation":organisation_table(b);break;case"people":people_table(b);break;case"post":post_table(b);break;case"comments":comments_table(b);break;case"block_people":unblock_people_table(b);break;case"location":location_table(b);break;case"plan":plan_table(b);break;case"faq":faq_table(b);break;case"challenge":challenge_table(b);break;case"order":order_table(b);break;case"people_order":people_order_table(b);break;case"people":block_people_table(b)}}function unblock_people_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].first_name,a[d].last_name,a[d].gender,a[d].email_id,a[d].unblock,a[d].actions])}function block_people_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].first_name,a[d].last_name,a[d].gender,a[d].email_id,a[d].status,a[d].ut,a[d].actions])}function comments_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].comments,a[d].postFKName,a[d].peoplesFKName,a[d].ut,a[d].status,a[d].actions])}function page_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();for(var c in a)a.hasOwnProperty(c)&&b.fnAddData([a[c].title,a[c].url,a[c].created_at,a[c].updated_at,a[c].display_status,a[c].actions])}function users_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([c++,a[d].user_image,a[d].username,a[d].emailId,a[d].addDate,a[d].lastLogin,a[d].status,a[d].actions])}function people_table(a){return alert(a),!1}function post_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].file_name,a[d].title,a[d].file_type,a[d].total_votes,a[d].peoplesFKName,a[d].status,a[d].ut,a[d].actions])}function email_template_table(a){var b=$(".dynamicTable").DataTable(),c=1;b.fnClearTable();for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].title,a[d].created_at,a[d].updated_at,a[d].display_status,a[d].actions])}function organisation_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();for(var c in a)a.hasOwnProperty(c)&&b.fnAddData([a[c].incheckbox,a[c].logo,a[c].name,a[c].sector,a[c].country,a[c].email_id,a[c].telephone,a[c].telephone,a[c].ut,a[c].display_status,a[c].actions])}function plan_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].title,a[d].price,a[d].challenges,a[d].user_posts,a[d].validity,a[d].trial_period,a[d].status,a[d].ut,a[d].actions])}function location_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].name,a[d].country_code,a[d].created_at,a[d].updated_at,a[d].display_status,a[d].actions])}function faq_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].question,a[d].answer,a[d].status,a[d].ut,a[d].actions])}function challenge_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].title,a[d].prizes,a[d].post_format,a[d].lang_name,a[d].min_votes,a[d].org_name,a[d].challenge_status,a[d].launch_date,a[d].actions])}function order_table(a){var b=$(".dynamicTable").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].org_name,a[d].price_plan,a[d].no_of_challenges,a[d].no_of_posts,a[d].customize_page,a[d].statistics,a[d].valid_from,a[d].expire_on,a[d].payment_status,a[d].actions])}function people_order_table(a){var b=$(".dynamicTable2").DataTable();b.fnClearTable();var c=1;for(var d in a)a.hasOwnProperty(d)&&b.fnAddData([a[d].incheckbox,c++,a[d].people_name,a[d].title,a[d].amount,a[d].currency_code,a[d].payment_status,a[d].ut,a[d].actions])}function changeStatus(a,b,c,d){var e;switch($.trim(d)){case"page":e=site_url()+"page/changestatus";break;case"admin_user":e=site_url()+"users/changestatus";break;case"email_template":e=site_url()+"email_temp/changestatus";break;case"organisation":e=site_url()+"organisation/changestatus";break;case"people":e=site_url()+"people/changestatus";break;case"post":e=site_url()+"posts/changestatus";break;case"location":e=site_url()+"location/changestatus";break;case"comments":e=site_url()+"comments/changestatus";break;case"plan":e=site_url()+"plan/changestatus";break;case"faq":e=site_url()+"faq/changestatus"}$(a).attr("src",base_url()+"assets/images/loading2.gif"),$.ajax({url:e,type:"POST",data:{id:b,status:c,type:d},success:function(b){$(a).parent().html(b)}})}function checkAllCheckboxes(a){var b=0;checked=0==checked;for(var b=0;b<a.length;b++)field_name=a.elements[b].name,-1!=field_name.indexOf("chk")&&(0==a.elements[b].checked?a.elements[b].checked=!0:a.elements[b].checked=!0);document.getElementById("selectAllCheckBox").setAttribute("onclick","uncheckAllCheckboxes(document.dynamicForm)")}function uncheckAllCheckboxes(a){for(ctr=0;ctr<a.length;ctr++)field_name=a.elements[ctr].name,-1!=field_name.indexOf("chk")&&(a.elements[ctr].checked=!1);document.getElementById("selectAllCheckBox").setAttribute("onclick","checkAllCheckboxes(document.dynamicForm)")}function checkPeopleCheckbox(a){var b=0;checked=0==checked;for(var b=0;b<a.length;b++)field_name=a.elements[b].name,-1!=field_name.indexOf("chk2")&&(0==a.elements[b].checked?a.elements[b].checked=!0:a.elements[b].checked=!0);document.getElementById("selectAllCheckBox2").setAttribute("onclick","uncheckPeopleCheckboxes(document.dynamicForm2)")}function uncheckPeopleCheckboxes(a){for(ctr=0;ctr<a.length;ctr++)field_name=a.elements[ctr].name,-1!=field_name.indexOf("chk2")&&(a.elements[ctr].checked=!1);document.getElementById("selectAllCheckBox2").setAttribute("onclick","checkPeopleCheckbox(document.dynamicForm2)")}function goback(a){window.location=base_url()+"admin/"+a.id}function redirect(a){window.location=a}function custom_rules(){$.validator.addMethod("admin_unique_email",function(a,b){ajax_req&&ajax_req.abort();var c=!1;return ajax_req=$.ajax({url:base_url()+"admin/users/is_email_unique",data:{value:a},type:"post",async:!1,success:function(a){c=!!a},complete:function(a){}}),c},"Email already exists."),$.validator.addMethod("image_format",function(a,b){var c=new FormData;c.append("file",input.files[0]),ajax_req&&ajax_req.abort();var d=!1;return ajax_req=$.ajax({url:base_url()+"admin/ajax/is_valid_image",type:"post",data:c,processData:!1,contentType:!1,async:!1,success:function(a){d=!!a},complete:function(a){}}),d},"Invalid image format.")}function submit_user_form(){$("#form-add-user").valid()&&$("#form-add-user").submit()}function validate_admin_user(){$("#form-add-user").validate({rules:{username:{required:!0},emailidadd:{required:!0,email:!0},inputPasswordNew:{required:!0,minlength:8},inputPasswordNew2:{equalTo:"#inputPasswordNew"},userimage:{required:!1,accept:"jpg,png,jpeg,gif"}},messages:{username:{required:"<p class='error help-block'><span class='label label-important'>Please Enter Username.!</span></p>"},emailidadd:{required:"<p class='error help-block'><span class='label label-important'>Please Enter Email id.!</span></p>",email:"<p class='error help-block'><span class='label label-important'>Please Enter Valid Email Id.!</span></p>"},inputPasswordNew:{required:"<p class='error help-block'><span class='label label-important'>Please Enter Password.!</span></p>",minlength:"<p class='error help-block'><span class='label label-important'>Password Length should be 8 Character!</span></p>"},userimage:{accept:"<p class='error help-block'><span class='label label-important'>Please Select Valid File.</span></p>"},inputPasswordNew2:{equalTo:"<p class='error help-block'><span class='label label-important'>Confirm password is not  matching .!</span></p>"}},submitHandler:function(a){var b=$("#module-permission input[name='menuCheck[]']:checked").length;b>0?a.submit():$(".bwizard-steps li:last").hasClass("active")&&bootbox.alert("Select module permission.")}})}function validate_admin_login(){$("#form-login-submit").validate({rules:{username:"required",password:{required:!0}},messages:{username:"<span class='gritter-add-primary btn btn-primary btn-block'>Please Enter Username.!</span></p>",password:{required:"<span class='gritter-add-primary btn btn-primary btn-block'>Please Enter Password.!</span></p>"}},submitHandler:function(a){a.submit()}})}function validate_orgnisation(){$("#form-add-org-step-1").validate({rules:{price_plan:"required",org_name:"required",org_sector:"required",org_employee_no:"required",no_of_employees:"required",org_address:"required",org_city:"required",org_country:"required",org_postal_code:{required:!0,number:!0},org_website:{required:!0,url:!0},org_facebook_url:{url:!0},org_twitter_url:{url:!0},org_instagram_url:{url:!0},org_google_url:{url:!0},org_linkedin_url:{url:!0},org_email:{email:!0},org_contact_person_job:{required:!0},org_contact_person:{required:!0},org_telephone:{required:!0,number:!0}},messages:{},submitHandler:function(a){a.submit()}}),$("#form-add-org-step-2").validate({rules:{org_contact_person:{required:!0},org_contact_person_job:{required:!0},org_telephone:{required:!0,number:!0},org_email:{required:!0,email:!0}},messages:{},submitHandler:function(a){a.submit()}}),$("#form-add-org-step-3").validate({rules:{org_page_name:{required:!0}},messages:{},submitHandler:function(a){a.submit()}})}function validate_org_change_pass(){$("#org-change-pass").validate({rules:{org_new_password:{required:!0,minlength:8},org_password_confirm:{equalTo:"#org_new_password"}},messages:{org_new_password:{required:"<p class='error help-block'><span class='label label-important'>Please Enter Password.!</span></p>",minlength:"<p class='error help-block'><span class='label label-important'>Password Length should be 8 Character!</span></p>"},org_password_confirm:"<p class='error help-block'><span class='label label-important'>Confirm password is not  matching .!</span></p>"},submitHandler:function(a){a.submit()}})}function validate_page(){$("#form-add-page").validate({rules:{title:"required",menu_title:"required",meta_title:"required",meta_content:"required",status:"required"},messages:{title:"<p class='error help-block'><span class='label label-important'>Please Enter Page Title.!</span></p>",menu_title:"<p class='error help-block'><span class='label label-important'>Please Enter Menu Title.!</span></p>",email_title:"<p class='error help-block'><span class='label label-important'>Please enter your email title.!</span></p>",template_content:"<p class='error help-block'><span class='label label-important'>Please enter your email content.!</span></p>",userfile:"<p class='error help-block'><span class='label label-important'>Please Select file for logo.!</span></p>"},submitHandler:function(a){a.submit()}})}function validate_location(){$("#form-add-location").validate({rules:{country_name:"required",country_code:"required",status:"required"},messages:{country_name:"<p class='error help-block'><span class='label label-important'>Please Enter Country Name.!</span></p>",country_code:"<p class='error help-block'><span class='label label-important'>Please Enter Country Code.!</span></p>",status:"<p class='error help-block'><span class='label label-important'>Please Select Status.!</span></p>"},submitHandler:function(a){a.submit()}})}function user_form_next(){$(".bwizard-steps li:last a").trigger("click")}function org_form_next(){}function org_tab(a){}function user_form_wizard(){var a="bwizard-steps",b=$("#admin-wizard");$("#admin-wizard").bootstrapWizard({onNext:function(a,b,c){alert("1243")},onLast:function(a,c,d){return b.find("#inputTitle").val()?void 0:(alert("You must enter the product title"),b.find("#inputTitle").focus(),!1)},onTabClick:function(a,b,c){return $("#form-add-user").valid()},onTabShow:function(a,c,d){var e=c.find("li:not(.status)").length,f=d+1,g=f/e*100;b.find(".bar").length&&(b.find(".bar").css({width:g+"%"}),b.find(".bar").find(".step-current").html(f).parent().find(".steps-total").html(e).parent().find(".steps-percent").html(Math.round(g)+"%")),b.find(".step-current").length&&b.find(".step-current").html(f),b.find(".steps-total").length&&b.find(".steps-total").html(e),b.find(".steps-complete").length&&b.find(".steps-complete").html(f-1),c.find("li:not(.status)").removeClass("primary"),c.find("li:not(.status):lt("+(f-1)+")").addClass("primary"),f>=e?(b.find(".pagination .next").hide(),b.find(".pagination .finish").show(),b.find(".pagination .finish").removeClass("disabled")):(b.find(".pagination .next").show(),b.find(".pagination .finish").hide())},tabClass:a,nextSelector:".next",previousSelector:".previous",firstSelector:".first",lastSelector:".last"}),b.find(".finish").click(function(){alert("Finished!, Starting over!"),b.find("a[data-toggle*='tab']:first").trigger("click")})}function org_form_wizard(){var a="bwizard-steps",b=$("#org-wizard");$("#org-wizard").bootstrapWizard({onNext:function(a,b,c){},onLast:function(a,b,c){},onTabClick:function(a,b,c){return"0"==c?$("#form-add-org-step-1").valid():"1"==c?$("#form-add-org-step-2").valid():"2"==c?$("#form-add-org-step-3").valid():void 0},onTabShow:function(a,c,d){var e=c.find("li:not(.status)").length,f=d+1,g=f/e*100;b.find(".bar").length&&(b.find(".bar").css({width:g+"%"}),b.find(".bar").find(".step-current").html(f).parent().find(".steps-total").html(e).parent().find(".steps-percent").html(Math.round(g)+"%")),b.find(".step-current").length&&b.find(".step-current").html(f),b.find(".steps-total").length&&b.find(".steps-total").html(e),b.find(".steps-complete").length&&b.find(".steps-complete").html(f-1),c.find("li:not(.status)").removeClass("primary"),c.find("li:not(.status):lt("+(f-1)+")").addClass("primary"),f>=e?(b.find(".pagination .next").hide(),b.find(".pagination .finish").show(),b.find(".pagination .finish").removeClass("disabled")):(b.find(".pagination .next").show(),b.find(".pagination .finish").hide())},tabClass:a,nextSelector:".next",previousSelector:".previous",firstSelector:".first",lastSelector:".last"}),b.find(".finish").click(function(){})}var checked=!1;$(document).ready(function(){validate_admin_user(),validate_admin_login(),validate_orgnisation(),validate_page(),validate_org_change_pass(),validate_location(),custom_rules()});var ajax_req;$(document).ready(function(){user_form_wizard(),org_form_wizard()});